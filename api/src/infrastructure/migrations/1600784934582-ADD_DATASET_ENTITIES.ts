import {MigrationInterface, QueryRunner} from 'typeorm';

export class ADDDATASETENTITIES1600784934582 implements MigrationInterface {
    name = 'ADDDATASETENTITIES1600784934582'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query('CREATE TYPE "public"."breathing_depth_types_depth_type_enum" AS ENUM(\'shallow\', \'deep\')');
        await queryRunner.query('CREATE TABLE "public"."breathing_depth_types" ("id" SERIAL NOT NULL, "depth_type" "public"."breathing_depth_types_depth_type_enum" NOT NULL, CONSTRAINT "UQ_6e5f0d1ce3bb315f3f122ceb4e7" UNIQUE ("depth_type"), CONSTRAINT "PK_1a99001554bf2c36a51164655d4" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TYPE "public"."breathing_difficulty_types_difficulty_type_enum" AS ENUM(\'heavy\', \'normal\')');
        await queryRunner.query('CREATE TABLE "public"."breathing_difficulty_types" ("id" SERIAL NOT NULL, "difficulty_type" "public"."breathing_difficulty_types_difficulty_type_enum" NOT NULL, CONSTRAINT "UQ_1787d84191e947f80d1131fb424" UNIQUE ("difficulty_type"), CONSTRAINT "PK_605ce7c7a6026ab724bbb207259" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TYPE "public"."breathing_duration_types_duration_type_enum" AS ENUM(\'enlogated\', \'short\', \'normal\')');
        await queryRunner.query('CREATE TABLE "public"."breathing_duration_types" ("id" SERIAL NOT NULL, "duration_type" "public"."breathing_duration_types_duration_type_enum" NOT NULL, CONSTRAINT "UQ_0c7250384ca70f9fbfe076042b8" UNIQUE ("duration_type"), CONSTRAINT "PK_07e0b97d1fd1f4fe2bfdb6db873" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TYPE "public"."breathing_types_breathing_type_enum" AS ENUM(\'inhale\', \'exhale\')');
        await queryRunner.query('CREATE TABLE "public"."breathing_types" ("id" SERIAL NOT NULL, "breathing_type" "public"."breathing_types_breathing_type_enum" NOT NULL, CONSTRAINT "UQ_8c0f7a17b986cc52093a2f86a73" UNIQUE ("breathing_type"), CONSTRAINT "PK_de04b55d7dceaa985594ebf3935" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TYPE "public"."dataset_audio_types_audio_type_enum" AS ENUM(\'breathing\', \'cough\', \'speech\')');
        await queryRunner.query('CREATE TABLE "public"."dataset_audio_types" ("id" SERIAL NOT NULL, "audio_type" "public"."dataset_audio_types_audio_type_enum" NOT NULL, CONSTRAINT "UQ_6d3f411995926a83a6853896e19" UNIQUE ("audio_type"), CONSTRAINT "PK_9498cc3c7984cce20d78f625c95" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TABLE "public"."dataset_breathing_characteristics" ("id" SERIAL NOT NULL, "request_id" integer NOT NULL, "breathing_type_id" integer NOT NULL, "depth_type_id" integer NOT NULL, "difficulty_type_id" integer NOT NULL, "duration_type_id" integer NOT NULL, CONSTRAINT "PK_93bc1944c5b456ccd2d3ff1bd0a" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE INDEX "IDX_c452c0d0605d53cf82a506e59a" ON "public"."dataset_breathing_characteristics" ("request_id") ');
        await queryRunner.query('CREATE INDEX "IDX_13a303196f467042f0c28dccd1" ON "public"."dataset_breathing_characteristics" ("breathing_type_id") ');
        await queryRunner.query('CREATE INDEX "IDX_81adbb63d1cd6f90c1f2be43c4" ON "public"."dataset_breathing_characteristics" ("depth_type_id") ');
        await queryRunner.query('CREATE INDEX "IDX_6b898cccddec97bac65b0c8249" ON "public"."dataset_breathing_characteristics" ("difficulty_type_id") ');
        await queryRunner.query('CREATE INDEX "IDX_f9af6bf015afea3b963acfd9ba" ON "public"."dataset_breathing_characteristics" ("duration_type_id") ');
        await queryRunner.query('CREATE TABLE "public"."dataset_cough_characteristics" ("id" SERIAL NOT NULL, "request_id" integer NOT NULL, "is_forced" boolean NOT NULL, "productivity_id" integer, "intensity_id" integer, "symptom_duration" integer NOT NULL, "commentary" character varying NOT NULL, CONSTRAINT "REL_946955130a75b3e243ba690bb8" UNIQUE ("request_id"), CONSTRAINT "PK_d062d457a39789eb97a6922d245" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TYPE "public"."gender_types_gender_type_enum" AS ENUM(\'male\', \'female\')');
        await queryRunner.query('CREATE TABLE "public"."gender_types" ("id" SERIAL NOT NULL, "gender_type" "public"."gender_types_gender_type_enum" NOT NULL, CONSTRAINT "UQ_6ccfff1daa2f6dafb38187a022d" UNIQUE ("gender_type"), CONSTRAINT "PK_7f45bc1b5b77e32a365e8dcf994" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TABLE "public"."dataset_patient_details" ("id" SERIAL NOT NULL, "request_id" integer NOT NULL, "age" integer NOT NULL, "gender_type_id" integer NOT NULL, "identifier" character varying NOT NULL, "is_smoking" boolean NOT NULL, CONSTRAINT "REL_f69a1b74bf96e9b3c1bf8722ae" UNIQUE ("request_id"), CONSTRAINT "PK_9db3a175d554ba058bc6b908033" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE INDEX "IDX_f69a1b74bf96e9b3c1bf8722ae" ON "public"."dataset_patient_details" ("request_id") ');
        await queryRunner.query('CREATE INDEX "IDX_e65a9a77bd695eabb5f15bd01c" ON "public"."dataset_patient_details" ("gender_type_id") ');
        await queryRunner.query('CREATE TABLE "public"."dataset_patient_diseases" ("id" SERIAL NOT NULL, "request_id" integer NOT NULL, "sick_days" integer NOT NULL, "is_covid19" boolean, "other_disease_name" character varying, "disease_type_id" integer, "acute_cough_types_id" integer, "chronic_cough_types_id" integer, CONSTRAINT "REL_3d023590740521fd9a8ff6535f" UNIQUE ("request_id"), CONSTRAINT "PK_2a20160f3ed4d92819aa59cd84b" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE INDEX "IDX_3d023590740521fd9a8ff6535f" ON "public"."dataset_patient_diseases" ("request_id") ');
        await queryRunner.query('CREATE INDEX "IDX_6d459e887a9fe78766ae6b6c54" ON "public"."dataset_patient_diseases" ("disease_type_id") ');
        await queryRunner.query('CREATE INDEX "IDX_357b4438d60c4ae6bb36a1772c" ON "public"."dataset_patient_diseases" ("acute_cough_types_id") ');
        await queryRunner.query('CREATE INDEX "IDX_0d893a2b196cd313cbc191cd62" ON "public"."dataset_patient_diseases" ("chronic_cough_types_id") ');
        await queryRunner.query('CREATE TABLE "public"."dataset_request" ("id" SERIAL NOT NULL, "user_id" integer NOT NULL, "date_created" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, "privacy_eula_version" integer NOT NULL, CONSTRAINT "PK_26b7befea8110f3cb02876ea120" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE INDEX "IDX_1d602890437f776fc1e47bb39d" ON "public"."dataset_request" ("user_id") ');
        await queryRunner.query('CREATE TYPE "public"."dataset_marking_status_marking_status_enum" AS ENUM(\'done\', \'in_process\', \'not_ready\')');
        await queryRunner.query('CREATE TABLE "public"."dataset_marking_status" ("id" SERIAL NOT NULL, "marking_status" "public"."dataset_marking_status_marking_status_enum" NOT NULL, CONSTRAINT "UQ_4f0ca0c381931440a622b0b6e6a" UNIQUE ("marking_status"), CONSTRAINT "PK_5152346ce2588a92a5fee136fff" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE TABLE "public"."dataset_audio_info" ("id" SERIAL NOT NULL, "marking_status_id" integer NOT NULL, "doctor_status_id" integer NOT NULL, "request_id" integer NOT NULL, "audio_type_id" integer NOT NULL, "samplerate" integer NOT NULL, "audio_path" character varying NOT NULL, "spectrogram_path" character varying NOT NULL, "audio_duration" integer NOT NULL, CONSTRAINT "PK_014a0dc1a306ea05d049d4a4218" PRIMARY KEY ("id"))');
        await queryRunner.query('CREATE INDEX "IDX_471c6461d1b75ebb7dff96d27a" ON "public"."dataset_audio_info" ("marking_status_id") ');
        await queryRunner.query('CREATE INDEX "IDX_b9a9b3c20abcfe9fa72685b9f4" ON "public"."dataset_audio_info" ("doctor_status_id") ');
        await queryRunner.query('CREATE INDEX "IDX_812311fd6fd6dab083e02f1eb9" ON "public"."dataset_audio_info" ("request_id") ');
        await queryRunner.query('CREATE INDEX "IDX_a28a0967afe063e205f9c758f4" ON "public"."dataset_audio_info" ("audio_type_id") ');
        await queryRunner.query('CREATE TABLE "public"."dataset_audio_espisodes" ("id" SERIAL NOT NULL, "audio_info_id" integer NOT NULL, "start" double precision NOT NULL, "end" double precision NOT NULL, CONSTRAINT "PK_c062f36f148a47abde67282111b" PRIMARY KEY ("id"))');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" ADD CONSTRAINT "FK_c452c0d0605d53cf82a506e59a2" FOREIGN KEY ("request_id") REFERENCES "public"."dataset_request"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" ADD CONSTRAINT "FK_13a303196f467042f0c28dccd1a" FOREIGN KEY ("breathing_type_id") REFERENCES "public"."breathing_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" ADD CONSTRAINT "FK_81adbb63d1cd6f90c1f2be43c46" FOREIGN KEY ("depth_type_id") REFERENCES "public"."breathing_depth_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" ADD CONSTRAINT "FK_6b898cccddec97bac65b0c82492" FOREIGN KEY ("difficulty_type_id") REFERENCES "public"."breathing_difficulty_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" ADD CONSTRAINT "FK_f9af6bf015afea3b963acfd9bab" FOREIGN KEY ("duration_type_id") REFERENCES "public"."breathing_duration_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_cough_characteristics" ADD CONSTRAINT "FK_946955130a75b3e243ba690bb85" FOREIGN KEY ("request_id") REFERENCES "public"."dataset_request"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_cough_characteristics" ADD CONSTRAINT "FK_41b928fa1e71266a68fd8ad5227" FOREIGN KEY ("productivity_id") REFERENCES "public"."cough_productivity_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_cough_characteristics" ADD CONSTRAINT "FK_7a4894c2aeeb4062d4b62d30eb9" FOREIGN KEY ("intensity_id") REFERENCES "public"."cough_intensity_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_details" ADD CONSTRAINT "FK_f69a1b74bf96e9b3c1bf8722ae3" FOREIGN KEY ("request_id") REFERENCES "public"."dataset_request"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_details" ADD CONSTRAINT "FK_e65a9a77bd695eabb5f15bd01c3" FOREIGN KEY ("gender_type_id") REFERENCES "public"."gender_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" ADD CONSTRAINT "FK_3d023590740521fd9a8ff6535f9" FOREIGN KEY ("request_id") REFERENCES "public"."dataset_request"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" ADD CONSTRAINT "FK_6d459e887a9fe78766ae6b6c54b" FOREIGN KEY ("disease_type_id") REFERENCES "public"."disease_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" ADD CONSTRAINT "FK_357b4438d60c4ae6bb36a1772c5" FOREIGN KEY ("acute_cough_types_id") REFERENCES "public"."acute_cough_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" ADD CONSTRAINT "FK_0d893a2b196cd313cbc191cd624" FOREIGN KEY ("chronic_cough_types_id") REFERENCES "public"."chronic_cough_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_request" ADD CONSTRAINT "FK_1d602890437f776fc1e47bb39de" FOREIGN KEY ("user_id") REFERENCES "public"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" ADD CONSTRAINT "FK_471c6461d1b75ebb7dff96d27a5" FOREIGN KEY ("marking_status_id") REFERENCES "public"."dataset_marking_status"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" ADD CONSTRAINT "FK_b9a9b3c20abcfe9fa72685b9f4c" FOREIGN KEY ("doctor_status_id") REFERENCES "public"."dataset_marking_status"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" ADD CONSTRAINT "FK_812311fd6fd6dab083e02f1eb97" FOREIGN KEY ("request_id") REFERENCES "public"."dataset_request"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" ADD CONSTRAINT "FK_a28a0967afe063e205f9c758f48" FOREIGN KEY ("audio_type_id") REFERENCES "public"."dataset_audio_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_espisodes" ADD CONSTRAINT "FK_8f3f01e1138689612037d80f1d0" FOREIGN KEY ("audio_info_id") REFERENCES "public"."dataset_audio_info"("id") ON DELETE NO ACTION ON UPDATE NO ACTION');
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_espisodes" DROP CONSTRAINT "FK_8f3f01e1138689612037d80f1d0"');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" DROP CONSTRAINT "FK_a28a0967afe063e205f9c758f48"');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" DROP CONSTRAINT "FK_812311fd6fd6dab083e02f1eb97"');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" DROP CONSTRAINT "FK_b9a9b3c20abcfe9fa72685b9f4c"');
        await queryRunner.query('ALTER TABLE "public"."dataset_audio_info" DROP CONSTRAINT "FK_471c6461d1b75ebb7dff96d27a5"');
        await queryRunner.query('ALTER TABLE "public"."dataset_request" DROP CONSTRAINT "FK_1d602890437f776fc1e47bb39de"');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" DROP CONSTRAINT "FK_0d893a2b196cd313cbc191cd624"');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" DROP CONSTRAINT "FK_357b4438d60c4ae6bb36a1772c5"');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" DROP CONSTRAINT "FK_6d459e887a9fe78766ae6b6c54b"');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_diseases" DROP CONSTRAINT "FK_3d023590740521fd9a8ff6535f9"');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_details" DROP CONSTRAINT "FK_e65a9a77bd695eabb5f15bd01c3"');
        await queryRunner.query('ALTER TABLE "public"."dataset_patient_details" DROP CONSTRAINT "FK_f69a1b74bf96e9b3c1bf8722ae3"');
        await queryRunner.query('ALTER TABLE "public"."dataset_cough_characteristics" DROP CONSTRAINT "FK_7a4894c2aeeb4062d4b62d30eb9"');
        await queryRunner.query('ALTER TABLE "public"."dataset_cough_characteristics" DROP CONSTRAINT "FK_41b928fa1e71266a68fd8ad5227"');
        await queryRunner.query('ALTER TABLE "public"."dataset_cough_characteristics" DROP CONSTRAINT "FK_946955130a75b3e243ba690bb85"');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" DROP CONSTRAINT "FK_f9af6bf015afea3b963acfd9bab"');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" DROP CONSTRAINT "FK_6b898cccddec97bac65b0c82492"');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" DROP CONSTRAINT "FK_81adbb63d1cd6f90c1f2be43c46"');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" DROP CONSTRAINT "FK_13a303196f467042f0c28dccd1a"');
        await queryRunner.query('ALTER TABLE "public"."dataset_breathing_characteristics" DROP CONSTRAINT "FK_c452c0d0605d53cf82a506e59a2"');
        await queryRunner.query('DROP TABLE "public"."dataset_audio_espisodes"');
        await queryRunner.query('DROP INDEX "public"."IDX_a28a0967afe063e205f9c758f4"');
        await queryRunner.query('DROP INDEX "public"."IDX_812311fd6fd6dab083e02f1eb9"');
        await queryRunner.query('DROP INDEX "public"."IDX_b9a9b3c20abcfe9fa72685b9f4"');
        await queryRunner.query('DROP INDEX "public"."IDX_471c6461d1b75ebb7dff96d27a"');
        await queryRunner.query('DROP TABLE "public"."dataset_audio_info"');
        await queryRunner.query('DROP TABLE "public"."dataset_marking_status"');
        await queryRunner.query('DROP TYPE "public"."dataset_marking_status_marking_status_enum"');
        await queryRunner.query('DROP INDEX "public"."IDX_1d602890437f776fc1e47bb39d"');
        await queryRunner.query('DROP TABLE "public"."dataset_request"');
        await queryRunner.query('DROP INDEX "public"."IDX_0d893a2b196cd313cbc191cd62"');
        await queryRunner.query('DROP INDEX "public"."IDX_357b4438d60c4ae6bb36a1772c"');
        await queryRunner.query('DROP INDEX "public"."IDX_6d459e887a9fe78766ae6b6c54"');
        await queryRunner.query('DROP INDEX "public"."IDX_3d023590740521fd9a8ff6535f"');
        await queryRunner.query('DROP TABLE "public"."dataset_patient_diseases"');
        await queryRunner.query('DROP INDEX "public"."IDX_e65a9a77bd695eabb5f15bd01c"');
        await queryRunner.query('DROP INDEX "public"."IDX_f69a1b74bf96e9b3c1bf8722ae"');
        await queryRunner.query('DROP TABLE "public"."dataset_patient_details"');
        await queryRunner.query('DROP TABLE "public"."gender_types"');
        await queryRunner.query('DROP TYPE "public"."gender_types_gender_type_enum"');
        await queryRunner.query('DROP TABLE "public"."dataset_cough_characteristics"');
        await queryRunner.query('DROP INDEX "public"."IDX_f9af6bf015afea3b963acfd9ba"');
        await queryRunner.query('DROP INDEX "public"."IDX_6b898cccddec97bac65b0c8249"');
        await queryRunner.query('DROP INDEX "public"."IDX_81adbb63d1cd6f90c1f2be43c4"');
        await queryRunner.query('DROP INDEX "public"."IDX_13a303196f467042f0c28dccd1"');
        await queryRunner.query('DROP INDEX "public"."IDX_c452c0d0605d53cf82a506e59a"');
        await queryRunner.query('DROP TABLE "public"."dataset_breathing_characteristics"');
        await queryRunner.query('DROP TABLE "public"."dataset_audio_types"');
        await queryRunner.query('DROP TYPE "public"."dataset_audio_types_audio_type_enum"');
        await queryRunner.query('DROP TABLE "public"."breathing_types"');
        await queryRunner.query('DROP TYPE "public"."breathing_types_breathing_type_enum"');
        await queryRunner.query('DROP TABLE "public"."breathing_duration_types"');
        await queryRunner.query('DROP TYPE "public"."breathing_duration_types_duration_type_enum"');
        await queryRunner.query('DROP TABLE "public"."breathing_difficulty_types"');
        await queryRunner.query('DROP TYPE "public"."breathing_difficulty_types_difficulty_type_enum"');
        await queryRunner.query('DROP TABLE "public"."breathing_depth_types"');
        await queryRunner.query('DROP TYPE "public"."breathing_depth_types_depth_type_enum"');
    }
}
